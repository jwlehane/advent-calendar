<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <title>LeHane Family Advent 2025</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Mountains+of+Christmas:wght@700&family=Nunito:wght@400;700&display=swap');

        :root {
            --red: #c0392b;
            --green: #27ae60;
            --gold: #f1c40f;
            --snow: #ecf0f1;
            --dark: #2c3e50;
            --wood: #5d4037;
            --ai-color: #8e44ad;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--dark);
            color: var(--dark);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            background-image: radial-gradient(circle at 50% 50%, #2c3e50 0%, #1a252f 100%);
            overflow-x: hidden;
        }

        /* Falling Snow Effect */
        .snowflake {
            position: fixed;
            top: -10px;
            z-index: 9999;
            color: #FFF;
            font-size: 1em;
            opacity: 0.8;
            pointer-events: none;
            animation: fall linear infinite;
        }

        @keyframes fall {
            0% {
                transform: translateY(-10vh) translateX(0) rotate(0deg);
                opacity: 1;
            }

            100% {
                transform: translateY(110vh) translateX(20px) rotate(360deg);
                opacity: 0;
            }
        }

        h1 {
            font-family: 'Mountains of Christmas', cursive;
            color: var(--gold);
            text-align: center;
            font-size: 3rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            margin-bottom: 10px;
        }

        .subtitle {
            text-align: center;
            color: var(--snow);
            font-size: 1.2rem;
            margin-bottom: 30px;
            font-style: italic;
        }

        /* Grid Layout */
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            max-width: 1000px;
            margin: 0 auto;
            padding-bottom: 100px;
        }

        /* The Door Card */
        .day-card {
            background-color: transparent;
            perspective: 1000px;
            height: 140px;
            cursor: pointer;
            position: relative;
        }

        .door-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.8s;
            transform-style: preserve-3d;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .day-card.open .door-inner {
            transform: rotateY(180deg);
        }

        .door-front,
        .door-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            font-family: 'Mountains of Christmas', cursive;
            font-size: 2.5rem;
        }

        .door-front {
            background: linear-gradient(135deg, var(--red), #a93226);
            color: var(--snow);
            border: 2px solid var(--gold);
            z-index: 2;
        }

        /* Pattern for front of doors */
        .door-front::after {
            content: "‚ùÑ";
            position: absolute;
            font-size: 1rem;
            top: 5px;
            right: 5px;
            opacity: 0.5;
        }

        .door-back {
            background-color: var(--snow);
            color: var(--dark);
            transform: rotateY(180deg);
            flex-direction: column;
            font-family: 'Nunito', sans-serif;
            font-size: 3rem;
            /* Emoji size */
        }

        .door-back span {
            font-size: 0.9rem;
            margin-top: 5px;
            font-weight: bold;
        }

        .locked {
            filter: grayscale(0.8);
            opacity: 0.7;
            cursor: not-allowed;
        }

        .locked .door-front {
            background: #555;
            border-color: #777;
        }

        /* Modal Styles */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            position: relative;
            box-shadow: 0 0 20px var(--gold);
            animation: popIn 0.3s ease-out;
            border: 4px solid var(--red);
        }

        .ai-modal-content {
            border: 4px solid var(--ai-color);
            box-shadow: 0 0 20px var(--ai-color);
        }

        @keyframes popIn {
            0% {
                transform: scale(0.5);
                opacity: 0;
            }

            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--dark);
        }

        .modal-emoji {
            font-size: 4rem;
            margin-bottom: 10px;
            display: block;
        }

        /* Specific Animations for Content */
        .animate-bounce {
            animation: bounce 1s infinite alternate;
        }

        .animate-spin {
            animation: spin 2s infinite linear;
        }

        .animate-wiggle {
            animation: wiggle 0.5s infinite;
        }

        .animate-pulse {
            animation: pulse 1.5s infinite;
        }

        .animate-slide {
            animation: slide 2s infinite linear;
        }

        @keyframes bounce {
            from {
                transform: translateY(0);
            }

            to {
                transform: translateY(-20px);
            }
        }

        @keyframes spin {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        @keyframes wiggle {

            0%,
            100% {
                transform: rotate(-10deg);
            }

            50% {
                transform: rotate(10deg);
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.1);
            }

            100% {
                transform: scale(1);
            }
        }

        @keyframes slide {
            0% {
                transform: translateX(-50px);
            }

            100% {
                transform: translateX(50px);
            }
        }

        .modal-title {
            font-family: 'Mountains of Christmas', cursive;
            font-size: 2rem;
            color: var(--red);
            margin: 0;
        }

        .modal-text {
            font-size: 1.1rem;
            line-height: 1.5;
            margin-top: 15px;
        }

        .tag {
            display: inline-block;
            background: var(--green);
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.8rem;
            margin-bottom: 10px;
            text-transform: uppercase;
            font-weight: bold;
        }

        /* AI Button & UI */
        .ai-fab {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--ai-color);
            color: white;
            padding: 15px 25px;
            border-radius: 30px;
            cursor: pointer;
            font-family: 'Mountains of Christmas', cursive;
            font-size: 1.2rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
            transition: transform 0.2s;
            z-index: 900;
            border: 2px solid white;
        }

        .ai-fab:hover {
            transform: scale(1.05);
        }

        .ai-controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 20px;
        }

        .ai-select {
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #ccc;
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
        }

        .ai-btn {
            background: var(--ai-color);
            color: white;
            border: none;
            padding: 12px;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
        }

        .ai-btn:hover {
            background: #732d91;
        }

        .ai-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .ai-response-box {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            border-left: 4px solid var(--ai-color);
            text-align: left;
            font-style: italic;
            min-height: 50px;
        }

        /* Footer Controls */
        .footer-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 50px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .footer-btn {
            background: transparent;
            border: 1px solid #7f8c8d;
            color: #bdc3c7;
            padding: 8px 15px;
            font-size: 0.9rem;
            cursor: pointer;
            border-radius: 5px;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s;
        }

        .footer-btn:hover {
            border-color: var(--gold);
            color: var(--gold);
        }
    </style>
</head>

<body>

    <div id="snow-container"></div>

    <h1>The LeHane 2025 Countdown</h1>
    <div class="subtitle">Rhinebeck ‚Ä¢ Gunnison ‚Ä¢ Villanova ‚Ä¢ Utica</div>

    <div class="calendar-grid" id="grid">
        <!-- JS will inject doors here -->
    </div>

    <div class="footer-controls">
        <button class="footer-btn" onclick="downloadCalendarInvite()">
            üìÖ Set Daily Reminders
        </button>
        <button class="footer-btn" onclick="resetCalendar()">
            üîÑ Reset Calendar (Debug)
        </button>
    </div>

    <!-- Main Advent Modal -->
    <div class="modal-overlay" id="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <span class="tag" id="modal-tag">Family</span>
            <div class="modal-emoji" id="modal-emoji">üéÑ</div>
            <h2 class="modal-title" id="modal-title">Title</h2>
            <p class="modal-text" id="modal-text">Content goes here...</p>
        </div>
    </div>

    <!-- AI Oracle Modal -->
    <div class="modal-overlay" id="ai-modal">
        <div class="modal-content ai-modal-content">
            <span class="close-btn" onclick="closeAiModal()">&times;</span>
            <div class="modal-emoji animate-pulse">üîÆ</div>
            <h2 class="modal-title" style="color: var(--ai-color)">LeHane Oracle</h2>
            <p>Dad's AI Elf is here to help (or annoy you). Ask it for a Vibe Code translation or a Holiday Excuse.</p>

            <div class="ai-controls">
                <select id="ai-member" class="ai-select">
                    <option value="General">For the Whole Family</option>
                    <option value="Riley (Bug)">Riley (Bug) üêû</option>
                    <option value="Greta (Bee)">Greta (Bee) üêù</option>
                    <option value="Henry (Beast)">Henry (Beast) üëπ</option>
                    <option value="Johnny (Dad)">Johnny (Dad) ü§ñ</option>
                    <option value="Melissa (Mamma)">Melissa (Mamma) üíÉ</option>
                </select>

                <select id="ai-task" class="ai-select">
                    <option value="excuse">‚ú® Generate Holiday Excuse</option>
                    <option value="riddle">‚ú® Christmas Riddle Generator</option>
                    <option value="compliment">‚ú® Sassy Elf Compliment</option>
                </select>

                <button class="ai-btn" onclick="generateAiContent()" id="ai-generate-btn">‚ú® Ask the Oracle ‚ú®</button>
            </div>

            <div class="ai-response-box" id="ai-response">
                Select an option and ask the Oracle...
            </div>
        </div>
    </div>

    <!-- AI Floating Action Button -->
    <div class="ai-fab" onclick="openAiModal()">
        ‚ú® Ask AI Oracle
    </div>

    <script>
        // --- DATA: The 24 Days of LeHane ---
        // Animations: bounce, spin, wiggle, pulse, slide
        const adventData = [
            { day: 1, tag: "Family", emoji: "üè†", anim: "pulse", title: "Welcome Home (Virtually)", text: "Kicking off the 2025 countdown! Whether you are in Rhinebeck, Gunnison, or PA... everyone get cooking! (Greta, put the popcorn on)." },
            { day: 2, tag: "Bug üêû", emoji: "üèîÔ∏è", anim: "bounce", title: "Presidential Alert", text: "Checking in on Gunnison. The President of the Western Mountain Rescue Team is on duty. Snow depth is 4ft, Riley is still short, but she runs the mountain." },
            { day: 3, tag: "Bee üêù", emoji: "üç∑", anim: "wiggle", title: "Sophisticated Palate", text: "Greta is requesting an Italian Ros√©. A perfect pairing for a triple major who definitely deserves a nap today." },
            { day: 4, tag: "Beast üëπ", emoji: "‚öæ", anim: "slide", title: "The Quiet Giant", text: "Henry update: Currently searching for that one elusive baseball card. If not found, he's going fishing." },
            { day: 5, tag: "Mamma", emoji: "üçø", anim: "spin", title: "Hallmark Marathon", text: "Mamma is organizing the lineup. Plot: City girl moves to Christmas tree farm. Greta requested popcorn. Everyone be quiet and watch." },
            { day: 6, tag: "Johnny", emoji: "ü§ñ", anim: "pulse", title: "AI Generated Dad Joke", text: "Dad: 'I asked the AI to write a joke about advent calendars.' <br>AI: 'It's days are numbered.' <br><i>(Kids roll eyes at Dad's Vibe Coding).</i>" },
            { day: 7, tag: "Family", emoji: "‚òï", anim: "wiggle", title: "Hydration Station", text: "Today's Poll: Hot Chocolate vs. Hot Apple Cider? <br>Mamma is drinking Iced Tea regardless of the temperature." },
            { day: 8, tag: "Bug üêû", emoji: "üöë", anim: "slide", title: "Safety Third?", text: "Riley is on patrol. If you get hurt on the mountain, she will save you... but she might make a joke about it first. Stay safe out there!" },
            { day: 9, tag: "Bee üêù", emoji: "üí§", anim: "pulse", title: "Do Not Disturb", text: "Greta is currently napping. It is part of the Marketing Analytics curriculum. You wouldn't understand the strategy." },
            { day: 10, tag: "Beast üëπ", emoji: "üèÇ", anim: "slide", title: "Shredding It", text: "Henry is hitting the slopes (recreationally). Gravity affects tall people differently. Watch your head, Beast." },
            { day: 11, tag: "Mamma", emoji: "üöó", anim: "wiggle", title: "Loving Leader", text: "Mamma says: 'Drive carefully! Be safe! Have fun!' (And look at this wreath I just made)." },
            { day: 12, tag: "Johnny", emoji: "üíª", anim: "bounce", title: "Vibe Code", text: "Dad is 'Vibe Coding' a new AI script. He thinks it's cool tech. The kids think it's nerdy. Status: Compiling..." },
            { day: 13, tag: "Bug üêû", emoji: "üìö", anim: "pulse", title: "Bookworm Mode", text: "Riley is likely reading a book while simultaneously saving a life. That Mini-Me focus is intense." },
            { day: 14, tag: "Bee üêù", emoji: "üìä", anim: "spin", title: "Stats & Style", text: "Greta and Henry represent the LeHane Sports Stats department. Who has better brackets this year? (Don't answer that)." },
            { day: 15, tag: "Family", emoji: "üçï", anim: "wiggle", title: "Rhinebeck Pizza Night", text: "Thinking about our favorite local spot. If you aren't in NY, order a slice and pretend it's from home." },
            { day: 16, tag: "Beast üëπ", emoji: "üé∞", anim: "spin", title: "Turning Stone", text: "Henry is feeling lucky. Note to Henry: The House always wins. Note to Henry's wallet: Run." },
            { day: 17, tag: "Mamma", emoji: "üç∏", anim: "pulse", title: "Cheers!", text: "Raising a glass! Riley with the cider, Greta with the Ros√©, Henry with the Michelob, Mamma with a Cosmo (on the rocks)." },
            { day: 18, tag: "Bug üêû", emoji: "üé®", anim: "wiggle", title: "Life in Color(ado)", text: "Riley sends a vibe from the Rockies. The air is thin, but the reading list is long." },
            { day: 19, tag: "Bee üêù", emoji: "üíÖ", anim: "bounce", title: "Trend Report", text: "Greta, what is 'in' this week? Please advise Dad so he stops using slang incorrectly in public." },
            { day: 20, tag: "Johnny", emoji: "ü•æ", anim: "slide", title: "Daily Walk", text: "Dad is out for his daily walk or hiking. If Riley is home, she's dragging him up a steeper trail." },
            { day: 21, tag: "Family", emoji: "‚ùÑÔ∏è", anim: "spin", title: "Winter Solstice", text: "The shortest day of the year. Which means Henry (The Tallest LeHane) casts the longest shadow today." },
            { day: 22, tag: "Beast üëπ", emoji: "üß§", anim: "pulse", title: "Accountability check", text: "Henry is holding the door for someone. If they don't say thank you, they will receive The Look." },
            { day: 23, tag: "Sisters", emoji: "üëØ‚Äç‚ôÄÔ∏è", anim: "bounce", title: "Mini Mamma & Mini Dad", text: "Greta and Riley: The dynamic duo. One manages the spreadsheet, the other manages the emergency. Unstoppable." },
            { day: 24, tag: "Family", emoji: "üéÑ", anim: "pulse", title: "Christmas Eve", text: "Get the cookies ready. Get the Michelob Ultra chilled. Get the Ros√© poured. We made it! Merry Christmas LeHanes!" }
        ];

        // --- SETUP ---
        const grid = document.getElementById('grid');
        const modal = document.getElementById('modal');
        const modalEmoji = document.getElementById('modal-emoji');
        const modalTitle = document.getElementById('modal-title');
        const modalText = document.getElementById('modal-text');
        const modalTag = document.getElementById('modal-tag');

        // AI Modal Elements
        const aiModal = document.getElementById('ai-modal');
        const aiResponseBox = document.getElementById('ai-response');
        const aiGenerateBtn = document.getElementById('ai-generate-btn');

        // Storage Key
        const STORAGE_KEY = 'lehane_advent_2025';

        // Load opened days
        let openedDays = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];

        // Current Date Logic
        const OVERRIDE_DATE = null;

        function getCurrentDate() {
            if (OVERRIDE_DATE) return new Date(OVERRIDE_DATE);
            return new Date();
        }

        function init() {
            const today = getCurrentDate();
            const currentDayOfMonth = today.getDate();
            const currentMonth = today.getMonth(); // 11 is December

            grid.innerHTML = ''; // Clear grid

            adventData.forEach(item => {
                const dayDiv = document.createElement('div');
                dayDiv.className = 'day-card';

                let isLocked = false;

                if (currentMonth < 11 && today.getFullYear() === 2025) {
                    isLocked = true;
                } else if (currentMonth === 11) {
                    if (item.day > currentDayOfMonth) isLocked = true;
                }

                if (openedDays.includes(item.day)) {
                    dayDiv.classList.add('open');
                }

                if (isLocked) {
                    dayDiv.classList.add('locked');
                    dayDiv.onclick = () => shakeLocked(dayDiv);
                } else {
                    dayDiv.onclick = () => openDay(dayDiv, item);
                }

                // Inner HTML Structure
                dayDiv.innerHTML = `
                    <div class="door-inner">
                        <div class="door-front">${item.day}</div>
                        <div class="door-back">
                            <span>${item.emoji}</span>
                            <span>Open!</span>
                        </div>
                    </div>
                `;

                grid.appendChild(dayDiv);
            });

            createSnow();
        }

        function openDay(element, data) {
            // If already open, just show modal
            if (!element.classList.contains('open')) {
                element.classList.add('open');
                if (!openedDays.includes(data.day)) {
                    openedDays.push(data.day);
                    localStorage.setItem(STORAGE_KEY, JSON.stringify(openedDays));
                }
                // Delay modal slightly for door animation
                setTimeout(() => showModal(data), 600);
            } else {
                showModal(data);
            }
        }

        function showModal(data) {
            modalTag.innerText = data.tag;
            modalTag.className = `tag ${getTagColor(data.tag)}`;
            modalEmoji.innerText = data.emoji;
            modalEmoji.className = `modal-emoji animate-${data.anim}`;
            modalTitle.innerText = data.title;
            modalText.innerHTML = data.text;
            modal.style.display = 'flex';
        }

        function closeModal() {
            modal.style.display = 'none';
        }

        // --- AI ORACLE FUNCTIONS ---

        function openAiModal() {
            aiModal.style.display = 'flex';
        }

        function closeAiModal() {
            aiModal.style.display = 'none';
        }

        async function generateAiContent() {
            const member = document.getElementById('ai-member').value;
            const task = document.getElementById('ai-task').value;

            aiGenerateBtn.innerText = "‚ú® Consulting the Elves... ‚ú®";
            aiGenerateBtn.disabled = true;
            aiResponseBox.innerHTML = '<span class="animate-pulse">Thinking...</span>';

            const systemPrompt = `You are a festive, slightly sassy AI Elf helper for the LeHane family. 
            Characters:
            - Johnny (Dad): embraces 'Vibe Coding' (AI/Tech geekery) which the kids roll eyes at, uses Gen Z slang incorrectly, loves daily walks/hiking.
            - Melissa (Mamma): The Loving Leader, sensible, sweet. Loves Hallmark movies, crafts, arranging flowers. Says 'Drive carefully, be safe!'. Drinks iced tea or occasional Cosmo.
            - Riley (Bug): President of Western Mountain Rescue Team, serious snow pro, hiking buddy with Dad.
            - Greta (Bee): Villanova student, triple major, requests popcorn for movies, loves cooking.
            - Henry (Beast): Tall, quiet, baseball, fishing, recreational snowboarding.
            
            Keep responses short (1-2 sentences), witty, and fun.`;

            let userPrompt = "";
            if (task === "excuse") {
                userPrompt = `Generate a funny, valid holiday excuse for ${member} to avoid chores or social obligations based on their personality.`;
            } else if (task === "riddle") {
                userPrompt = `Generate a tricky but fun Christmas riddle specifically for ${member}. Make the answer related to winter, holidays, or their hobbies. Put the Answer at the very end in parentheses.`;
            } else if (task === "compliment") {
                userPrompt = `Give a backhanded but loving holiday compliment to ${member}.`;
            }

            try {
                const responseText = await callGeminiAPI(systemPrompt, userPrompt);
                aiResponseBox.innerText = responseText;
            } catch (error) {
                aiResponseBox.innerText = "The elves are on a coffee break. (Error: " + error.message + ")";
            } finally {
                aiGenerateBtn.innerText = "‚ú® Ask the Oracle ‚ú®";
                aiGenerateBtn.disabled = false;
            }
        }

        async function callGeminiAPI(systemPrompt, userPrompt) {
            const apiKey = "AIzaSyCfgnpbPWrilStwQZjcOxu2h7p7cjFZwLY"; // Runtime provided key
            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

            const payload = {
                contents: [{ parts: [{ text: userPrompt }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] }
            };

            // Retry logic
            const delays = [1000, 2000, 4000];
            for (let i = 0; i <= delays.length; i++) {
                try {
                    const response = await fetch(url, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) throw new Error(`HTTP ${response.status}`);

                    const data = await response.json();
                    return data.candidates?.[0]?.content?.parts?.[0]?.text || "The Oracle is silent.";
                } catch (err) {
                    if (i === delays.length) throw err;
                    await new Promise(res => setTimeout(res, delays[i]));
                }
            }
        }

        function shakeLocked(element) {
            element.style.animation = 'wiggle 0.3s';
            setTimeout(() => element.style.animation = '', 300);
            alert("Hold your horses, LeHane! It's not that day yet.");
        }

        function getTagColor(tag) {
            if (tag.includes("Bug")) return "bg-blue";
            if (tag.includes("Bee")) return "bg-pink";
            return ""; // Default green
        }

        function resetCalendar() {
            if (confirm("Reset all opened doors?")) {
                localStorage.removeItem(STORAGE_KEY);
                openedDays = [];
                location.reload();
            }
        }

        // --- CALENDAR REMINDER FEATURE ---
        function downloadCalendarInvite() {
            // Current URL to include in the reminder
            const appUrl = window.location.href;

            // Create ICS content
            const icsContent = `BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//LeHane Family//Advent Calendar//EN
CALSCALE:GREGORIAN
BEGIN:VEVENT
SUMMARY:üéÑ LeHane Advent Time
DTSTART:20251201T140000Z
DTEND:20251201T141500Z
RRULE:FREQ=DAILY;COUNT=25
DESCRIPTION:Time to check the daily door! Use this link: ${appUrl}
LOCATION:The Internet
STATUS:CONFIRMED
SEQUENCE:0
BEGIN:VALARM
TRIGGER:-PT0M
ACTION:DISPLAY
DESCRIPTION:Reminder
END:VALARM
END:VEVENT
END:VCALENDAR`;

            // Create blob and download link
            const blob = new Blob([icsContent], { type: 'text/calendar;charset=utf-8' });
            const link = document.createElement('a');
            link.href = window.URL.createObjectURL(blob);
            link.setAttribute('download', 'lehane_advent_reminders.ics');
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // Snow Generation
        function createSnow() {
            const container = document.getElementById('snow-container');
            const snowflakes = 50;
            for (let i = 0; i < snowflakes; i++) {
                const flake = document.createElement('div');
                flake.className = 'snowflake';
                flake.innerHTML = '‚ùÑ';
                flake.style.left = Math.random() * 100 + 'vw';
                flake.style.animationDuration = Math.random() * 3 + 2 + 's';
                flake.style.opacity = Math.random();
                flake.style.fontSize = Math.random() * 10 + 10 + 'px';
                flake.style.animationDelay = Math.random() * 5 + 's';
                container.appendChild(flake);
            }
        }

        // Close modal on outside click
        window.onclick = function (event) {
            if (event.target == modal) {
                closeModal();
            }
            if (event.target == aiModal) {
                closeAiModal();
            }
        }

        // Init
        init();

    </script>
</body>

</html>
